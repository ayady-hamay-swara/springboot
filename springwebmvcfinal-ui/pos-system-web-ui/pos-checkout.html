<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS Checkout</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/pos-checkout.css">
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     NAV BAR â€” Settings & Calculator on LEFT side
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary navbar-pos">

    <!-- LEFT: Brand + Settings + Calculator -->
    <a class="navbar-brand font-weight-bold" href="index.html">ğŸª POS System</a>

    <!-- âš™ï¸ Settings Button -->
    <button class="nav-icon-btn" id="btnSettings" title="Settings">âš™ï¸</button>

    <!-- ğŸ§® Calculator Button -->
    

    <!-- RIGHT: Nav links -->
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="manage-customers.html">Customers</a></li>
            <li class="nav-item"><a class="nav-link" href="manage-items.html">Items</a></li>
            <li class="nav-item"><a class="nav-link" href="manage-categories.html">Categories</a></li>
            <li class="nav-item"><a class="nav-link" href="manage-employees.html">Employees</a></li>
            <li class="nav-item active">
                <a class="nav-link" href="pos-checkout.html">ğŸ›’ POS <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item"><a class="nav-link" href="search-orders.html">search Orders</a></li>
        </ul>
    </div>
    <button class="nav-icon-btn" id="btnCalc" title="Calculator">ğŸ§®</button>

    <button class="navbar-toggler ml-2" type="button" data-toggle="collapse" data-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
    </button>
</nav>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CALCULATOR POPUP (pure JS logic, no libraries)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="popup-panel" id="calcPanel">
    <div class="popup-header">
        <span>ğŸ§® Calculator</span>
        <button class="popup-close" id="calcClose">âœ•</button>
    </div>
    <div class="calc-wrap">
        <!-- Display -->
        <div class="calc-display">
            <div class="calc-expr" id="calcExpr">&nbsp;</div>
            <div class="calc-result" id="calcResult">0</div>
        </div>
        <!-- Buttons grid -->
        <div class="calc-grid">
            <!-- Row 1 -->
            <button class="cb cb-fn" data-action="clear">AC</button>
            <button class="cb cb-fn" data-action="sign">+/âˆ’</button>
            <button class="cb cb-fn" data-action="percent">%</button>
            <button class="cb cb-op" data-op="Ã·">Ã·</button>
            <!-- Row 2 -->
            <button class="cb" data-num="7">7</button>
            <button class="cb" data-num="8">8</button>
            <button class="cb" data-num="9">9</button>
            <button class="cb cb-op" data-op="Ã—">Ã—</button>
            <!-- Row 3 -->
            <button class="cb" data-num="4">4</button>
            <button class="cb" data-num="5">5</button>
            <button class="cb" data-num="6">6</button>
            <button class="cb cb-op" data-op="âˆ’">âˆ’</button>
            <!-- Row 4 -->
            <button class="cb" data-num="1">1</button>
            <button class="cb" data-num="2">2</button>
            <button class="cb" data-num="3">3</button>
            <button class="cb cb-op" data-op="+">+</button>
            <!-- Row 5 -->
            <button class="cb cb-zero" data-num="0">0</button>
            <button class="cb" data-num=".">.</button>
            <button class="cb cb-eq" data-action="equals">=</button>
        </div>
        <!-- Use in POS -->
        <button class="calc-use-btn" id="calcUseTotals">
            â• Use in Amount Received
        </button>
    </div>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SETTINGS POPUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="popup-panel" id="settingsPanel">
    <div class="popup-header">
        <span>âš™ï¸ Settings</span>
        <button class="popup-close" id="settingsClose">âœ•</button>
    </div>
    <div class="settings-body">

        <div class="settings-section">
            <div class="settings-label">ğŸª Store Name</div>
            <input type="text" id="sStoreName" class="settings-input" placeholder="My Store">
        </div>

        <div class="settings-section">
            <div class="settings-label">ğŸ’± Default Currency</div>
            <select id="sCurrency" class="settings-input">
                <option value="Rs.">Rs. â€” Sri Lanka Rupee</option>
                <option value="$">$ â€” US Dollar</option>
                <option value="â‚¬">â‚¬ â€” Euro</option>
                <option value="Â£">Â£ â€” British Pound</option>
                <option value="â‚¹">â‚¹ â€” Indian Rupee</option>
                <option value="Â¥">Â¥ â€” Japanese Yen</option>
                <option value="AED">AED â€” UAE Dirham</option>
            </select>
        </div>

        <div class="settings-section">
            <div class="settings-label">ğŸ§¾ Tax Rate (%)</div>
            <input type="number" id="sTaxRate" class="settings-input" placeholder="0" min="0" max="100" step="0.1">
        </div>

        <div class="settings-section">
            <div class="settings-label">ğŸ–¨ï¸ Auto-print Receipt</div>
            <label class="toggle-label">
                <input type="checkbox" id="sAutoPrint">
                <span class="toggle-track"></span>
                <span class="toggle-text">Off</span>
            </label>
        </div>

        <div class="settings-section">
            <div class="settings-label">ğŸ”” Sound on Add to Cart</div>
            <label class="toggle-label">
                <input type="checkbox" id="sSound" checked>
                <span class="toggle-track"></span>
                <span class="toggle-text">On</span>
            </label>
        </div>

        <div class="settings-section">
            <div class="settings-label">ğŸ‘¤ Cashier Name</div>
            <input type="text" id="sCashierName" class="settings-input" placeholder="Admin">
        </div>

        <button class="settings-save-btn" id="btnSaveSettings">ğŸ’¾ Save Settings</button>
    </div>
</div>

<!-- Backdrop for popups -->
<div class="popup-backdrop" id="popupBackdrop"></div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MAIN POS LAYOUT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="pos-wrapper">
    <div class="pos-layout">

        <!-- â•â•â•â•â•â•â• LEFT SECTION â•â•â•â•â•â•â• -->
        <div class="pos-left">

            <!-- STATS BAR -->
            <div class="stats-bar">
                <div class="stat-pill">
                    <span class="stat-lbl">Today's Sales</span>
                    <span class="stat-val" id="todaySales">Rs. 0.00</span>
                </div>
                <div class="stat-pill">
                    <span class="stat-lbl">Transaction</span>
                    <span class="stat-val" id="todayTransactions">0</span>
                </div>
                <div class="stat-pill">
                    <span class="stat-lbl">Cashier</span>
                    <span class="stat-val" id="cashierName">Admin</span>
                </div>
            </div>

            <!-- SEARCH + CATEGORY -->
            <div class="search-row">
                <div class="search-wrap">
                    <span class="search-icon">ğŸ”</span>
                    <input type="text" id="productSearch" class="search-input"
                           placeholder="Search product by name or scan barcode..." autofocus>
                    <div class="product-results" id="productResults" style="display:none;"></div>
                </div>
                <select id="categoryFilter" class="category-select">
                    <option value="">All Categories</option>
                </select>
            </div>

            <!-- CART BOX -->
            <div class="cart-box">
                <div class="cart-box-header">
                    <span>ğŸ›’ Cart Items &nbsp;<span class="cart-count" id="cartCount">0 items</span></span>
                    <button class="btn-clear-cart" id="btnClearCart">ğŸ—‘ Clear</button>
                </div>
                <div class="cart-table-head">
                    <span class="col-name">Product</span>
                    <span class="col-qty">Qty</span>
                    <span class="col-price">Unit Price</span>
                    <span class="col-total">Total</span>
                    <span class="col-action"></span>
                </div>
                <div class="cart-table-body" id="cartItems">
                    <div class="cart-empty">
                        <div style="font-size:48px;">ğŸ›’</div>
                        <p>Cart is empty</p>
                        <small>Search or scan a product to add it</small>
                    </div>
                </div>
            </div>

            <!-- TOTALS BAR -->
            <div class="totals-bar">
                <div class="total-item">
                    <span class="total-lbl">Subtotal:</span>
                    <span class="total-val" id="subtotal">Rs. 0.00</span>
                </div>
                <div class="total-item discount-item">
                    <span class="total-lbl">Discount:</span>
                    <input type="number" id="discountPercent" class="discount-input" value="0" min="0" max="100" step="1">
                    <span class="total-lbl">%</span>
                    <span class="total-val text-danger" id="discountAmount">- Rs. 0.00</span>
                </div>
                <div class="total-item total-final">
                    <span class="total-lbl">Total:</span>
                    <span class="total-val" id="totalAmount">Rs. 0.00</span>
                </div>
            </div>

        </div><!-- /pos-left -->


        <!-- â•â•â•â•â•â•â• RIGHT SECTION â•â•â•â•â•â•â• -->
        <div class="pos-right">

            <!-- CUSTOMER -->
            <div class="right-section customer-section">
                <div class="right-section-title">
                    <span>ğŸ‘¤ Customer</span>
                    <button class="btn-change" id="btnSelectCustomer">Change</button>
                </div>
                <div class="customer-info" id="customerDisplay">
                    <div class="cust-name">Walk-in Customer</div>
                    <div class="cust-detail">â€”</div>
                </div>
            </div>

            <!-- CURRENCY CONVERTER -->
            <div class="right-section currency-section">
                <div class="right-section-title">ğŸ’± Currency Converter</div>
                <div class="currency-total-row">
                    <span class="currency-lbl">POS Total:</span>
                    <span class="currency-pos-total" id="currPosTotal">Rs. 0.00</span>
                </div>
                <div class="currency-row">
                    <select id="currFrom" class="curr-select">
                        <option value="LKR" data-symbol="Rs.">Rs. LKR</option>
                        <option value="USD" data-symbol="$">$ USD</option>
                        <option value="EUR" data-symbol="â‚¬">â‚¬ EUR</option>
                        <option value="GBP" data-symbol="Â£">Â£ GBP</option>
                        <option value="INR" data-symbol="â‚¹">â‚¹ INR</option>
                        <option value="JPY" data-symbol="Â¥">Â¥ JPY</option>
                        <option value="AED" data-symbol="AED">AED</option>
                    </select>
                    <span class="curr-arrow">â†’</span>
                    <select id="currTo" class="curr-select">
                        <option value="USD" data-symbol="$">$ USD</option>
                        <option value="LKR" data-symbol="Rs.">IQ dinar</option>
                        <option value="EUR" data-symbol="â‚¬">â‚¬ EUR</option>
                        <option value="GBP" data-symbol="Â£">Â£ GBP</option>

                    </select>
                </div>
                <div class="currency-input-row">
                    <input type="number" id="currAmount" class="curr-amount-input" placeholder="0.00" step="0.01">
                    <button class="curr-convert-btn" id="btnConvert">Convert</button>
                </div>
                <div class="currency-result" id="currResult">â€”</div>
                <div class="curr-rate-row" id="currRateRow"></div>
            </div>

            <!-- PAYMENT METHOD -->
            <div class="right-section payment-section">
                <div class="right-section-title">ğŸ’³ Payment Method</div>
                <div class="payment-btns">
                    <button class="pay-btn active" data-method="CASH">ğŸ’µ Cash</button>
                    <button class="pay-btn" data-method="CARD">ğŸ’³ Card</button>
                    <button class="pay-btn" data-method="TRANSFER">ğŸ¦ Transfer</button>
                </div>
                <div id="cashSection" class="cash-section">
                    <label class="cash-label">Amount Received</label>
                    <input type="number" id="amountReceived" class="cash-input" placeholder="0.00" step="0.01">
                    <div class="change-row">
                        <span>Change:</span>
                        <span id="changeAmount" class="change-val">Rs. 0.00</span>
                    </div>
                </div>
            </div>

            <!-- ACTION BUTTONS -->
            <div class="right-section action-section">
                <button class="btn-complete" id="btnCompleteSale">âœ… Complete Sale</button>
                <div class="btn-row-2">
                    <button class="btn-hold" id="btnHold">â¸ Hold</button>
                    <button class="btn-cancel" id="btnCancel">âœ• Cancel</button>
                </div>
                <button class="btn-return" id="btnReturn">â†© Return</button>
            </div>

        </div><!-- /pos-right -->

    </div>
</div>


<!-- â•â•â•â•â•â•â• RECEIPT MODAL â•â•â•â•â•â•â• -->
<div class="modal fade" id="receiptModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title">âœ… Sale Complete!</h5>
                <button type="button" class="close text-white" data-dismiss="modal"><span>&times;</span></button>
            </div>
            <div class="modal-body" id="receiptContent"></div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="window.print()">ğŸ–¨ï¸ Print</button>
                <button class="btn btn-success" data-dismiss="modal" id="btnNewSale">â• New Sale</button>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â• CUSTOMER MODAL â•â•â•â•â•â•â• -->
<div class="modal fade" id="customerModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">ğŸ‘¤ Select Customer</h5>
                <button type="button" class="close text-white" data-dismiss="modal"><span>&times;</span></button>
            </div>
            <div class="modal-body">
                <input type="text" class="form-control mb-3" id="customerSearch" placeholder="Search by name or phone...">
                <div id="customerList" style="max-height:350px;overflow-y:auto;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="btnWalkin" data-dismiss="modal">Walk-in Customer</button>
            </div>
        </div>
    </div>
</div>

<!-- â•â•â•â•â•â•â• RETURN MODAL â•â•â•â•â•â•â• -->
<div class="modal fade" id="returnModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-warning">
                <h5 class="modal-title">â†© Process Return</h5>
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Order Number</label>
                    <input type="text" class="form-control" id="returnOrderNumber" placeholder="e.g. ORD0000001">
                </div>
                <div class="form-group">
                    <label>Reason</label>
                    <select class="form-control" id="returnReason">
                        <option value="">Select reason</option>
                        <option value="DEFECTIVE">Defective Item</option>
                        <option value="WRONG_ITEM">Wrong Item</option>
                        <option value="CUSTOMER_CHANGE">Customer Changed Mind</option>
                        <option value="OTHER">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea class="form-control" id="returnNotes" rows="2" placeholder="Optional..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button class="btn btn-warning" id="btnProcessReturn">Process Return</button>
            </div>
        </div>
    </div>
</div>

<script src="js/jquery-3.4.1.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/pos-checkout-controller.js"></script>
</body>
</html>